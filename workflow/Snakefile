rule all:
    input:
        "genome.fa.bowtie"  # L'index du génome est l'objectif final

rule download_genome:
    output:
        "ref_genome.fa"  # Le fichier FASTA téléchargé
    threads: 1 #la règle utilisera un coeur (car il y a un unique fichier)
    shell:
        "wget -O ref_genome.fa https://www.ncbi.nlm.nih.gov/nuccore/CP000253.1?report=fasta&log$=seqview"

rule index_genome:
    input:
        "ref_genome.fa"
    output:
        "genome.fa.bowtie"
    threads: 1
    params:
        docker_image="/home/raphael_genin/IODAA/Hackathon/reprohack/recipes/bowtie"  # Chemin vers l'image Docker
    shell:
        "docker run --rm -v {wildcards.dir}:/data {params.docker_image} bowtie-build /data/ref_genome.fa /data/genome.fa.bowtie"
